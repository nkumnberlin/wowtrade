---
import { getProfessionSkillTrees } from "./index.json"
import Browse from "../../../components/global/Layout/Browse.astro"
import BrowseProfessions from "../../../features/professions/browse"

let professions = null
try {
	professions = await getProfessionSkillTrees()
} catch (e) {
	console.log("error while fetching item to recipe")
}
---

<!-- WoWHead -->
<script id="header" is:inline>
	{
		;("const whTooltips = {colorLinks: true, iconizeLinks: true, renameLinks: true}")
	}
</script>
<script
	id="headerscript"
	src="https://wow.zamimg.com/widgets/power.js"
	strategy="lazyOnload"
	is:inline
></script>

<Browse title="See Listing">
	<BrowseProfessions professions={professions} client:only="react" />
</Browse>

<script is:inline>
	const buttons = window?.document?.querySelectorAll("[data-copy]")
	buttons.forEach((button) =>
		button.addEventListener("click", (ev) => {
			// @ts-ignore
			navigator.clipboard.writeText(ev.target.value)
		})
	)
</script>
