---
import { getProfessionSkillTrees } from "./index.json"
import Browse from "../../../components/global/Layout/Browse.astro"
import BrowseProfessions from "../../../features/professions/browse"
import { browseProfessions } from "../../../external/services/Professions"

const itemID = Astro.url.searchParams.get("itemID")
// import mockProfessions from "./professions.json"
let professions = null
console.log("ITEM ID ", itemID, Astro.url.searchParams.get("itemID"))
try {
	professions = getProfessionSkillTrees()
} catch (e) {
	console.log("error while fetching item to recipe")
}
---

<!-- WoWHead -->
<script id="header" is:inline>
	{
		;("const whTooltips = {colorLinks: true, iconizeLinks: true, renameLinks: true}")
	}
</script>
<script
	id="headerscript"
	src="https://wow.zamimg.com/widgets/power.js"
	strategy="lazyOnload"
	is:inline
></script>

<Browse title="See Listing">
	<BrowseProfessions professions={professions?.data} client:only="react" />
</Browse>

<script is:inline>
	const buttons = window?.document?.querySelectorAll("[data-copy]")
	buttons.forEach((button) =>
		button.addEventListener("click", (ev) => {
			// @ts-ignore
			navigator.clipboard.writeText(ev.target.value)
		})
	)
</script>
